<!DOCTYPE html>
<html>
<head>
  <title>Arduino Live Data</title>
</head>
<body>
  <h1>GitHub Pages is working âœ…</h1>
  <p>Waiting for Arduino data...</p>

  <h2>Live Sensor Data</h2>
<pre id="data">Waiting for data...</pre>

<script>
async function fetchData() {
  try {
    const res = await fetch(
      "https://funny-kelpie-034c79.netlify.app/.netlify/functions/update"
    );
    const data = await res.json();

    if (Object.keys(data).length === 0) {
      document.getElementById("data").textContent = "Waiting for data...";
    } else {
      document.getElementById("data").textContent =
        JSON.stringify(data, null, 2);
    }
  } catch (err) {
    document.getElementById("data").textContent = "Error fetching data";
  }
}

setInterval(fetchData, 3000);
fetchData();
</script>

</body>
</html>
